

---

```markdown
# ğŸ³ Flask + Redis with Docker & Docker Compose â€“ Complete Guide

This project containerizes a Python Flask application with Redis using Docker and Docker Compose. It demonstrates container creation, networking, service orchestration, and inter-container communication â€” a solid DevOps sandbox setup.

Built with ğŸ’¡ by Bujji â€“ tactical strategist in DevOps!

---

## ğŸ“ Project Structure

```
my-flask-docker-app/
â”œâ”€â”€ app.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ .dockerignore
â””â”€â”€ docker-compose.yml
```

---

## 1ï¸âƒ£ app.py â€“ Python + Redis App

```python
from flask import Flask
import redis

app = Flask(__name__)
r = redis.Redis(host='redis', port=6379)

@app.route('/')
def hello():
    try:
        visits = r.incr('visits')
    except redis.ConnectionError:
        visits = "Redis not available"
    return f"Hello Bujji! Visit count: {visits}"

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
```

âœ… Talks to Redis using name `redis` â†’ handled by Compose network.

---

## 2ï¸âƒ£ requirements.txt

```
flask==2.3.2
redis==5.0.1
```

---

## 3ï¸âƒ£ .dockerignore

```
__pycache__/
*.pyc
.env
*.log
```

Keeps builds clean and prevents sensitive or bulky files from entering Docker image.

---

## 4ï¸âƒ£ Dockerfile

```Dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 5000
CMD ["python", "app.py"]
```

âœ… Slim base + caching + clean layers.

---

## 5ï¸âƒ£ docker-compose.yml

```yaml
version: "3.9"

services:
  web:
    build: .
    container_name: flask-app
    ports:
      - "5000:5000"
    depends_on:
      - redis
  redis:
    image: redis
    container_name: redis-service
```

âœ… `depends_on` ensures Redis is ready when Flask launches.  
âœ… Compose creates default bridge network â€” allowing `web` to call `redis`.

---

## ğŸ§ª Run Step-by-Step in Your Sandbox

### 1ï¸âƒ£ Build & Start Containers

```bash
docker compose up --build
```

Visit in browser:  
```
http://localhost:5000
```

### 2ï¸âƒ£ Stop and Remove All

```bash
docker compose down
```

### 3ï¸âƒ£ Run in Background

```bash
docker compose up -d
docker compose logs web
```

### 4ï¸âƒ£ Rebuild After Code Change

```bash
docker compose up --build
```

---

## ğŸ› ï¸ Debugging Tools

### Show containers:
```bash
docker ps
```

### Check logs:
```bash
docker logs flask-app
```

### Enter container:
```bash
docker exec -it flask-app /bin/bash
```

### Remove name conflicts:
```bash
docker rm flask-app
```

---

## ğŸ’¡ DevOps Concepts Covered

- Container creation from Python Dockerfile
- Mounting custom networks for inter-service comms
- Redis integration via container alias
- Orchestration using `docker-compose.yml`
- Visit count simulates production cache logic

---

## ğŸ§  Interview Prep

**Q:** Why use Compose over multiple `docker run` commands?  
> _Simplifies orchestration, creates internal DNS, handles dependencies, and supports scaling._

**Q:** How does Flask connect to Redis in Compose?  
> _Via service name `redis` on the shared Compose network. No manual IPs needed._

**Q:** What does `depends_on` do?  
> _Ensures containers launch in order â€” though it doesn't wait for readiness._

---

## âœ… Final Summary

You now have a complete microservice setup in Docker:
- Flask + Redis linked via Compose
- Custom Dockerfile & .dockerignore for efficient builds
- Named containers, networks, and orchestration in one YAML
- Ready for CI/CD pipelines or sandbox demo

Built by: **Bujji** ğŸ§   
Stage: Strategic Execution Mode âœ”ï¸

---

## â­ï¸ Want More?

