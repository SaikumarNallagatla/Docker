```markdown
# ğŸ³ Full DevOps Guide: Flask + Docker + CI/CD â€“ Built by Bujji

This is a complete step-by-step tutorial to build, containerize, test, and simulate a CI/CD pipeline for a Flask application using Docker inside a sandbox environment.

Designed for real-world DevOps flow â€” streamlined for VS Code, Docker, GitHub Actions, and CI/CD simulation.

---

## ğŸ§  Why Use Docker and CI/CD in Flask Projects?

| Problem (Without Docker)          | Docker + CI/CD Solution                                           |
|----------------------------------|------------------------------------------------------------------|
| App works only on developer laptop | Docker creates isolated environments that work anywhere          |
| Manual testing & deployment       | CI/CD automates build, test, and deployment                      |
| Slow delivery, manual regression  | Automated pipelines push new versions in minutes                 |
| Bloated environments              | Docker multi-stage builds create lean, secure images             |

âœ… **Industry Use Case:**  
In companies like Zomato or Swiggy, the order API, inventory service, and payment gateway all run in separate containers. CI/CD ensures fast bug fixes, tested rollouts, and zero downtime.

---

## ğŸ“ Final Project Structure

```
my-docker-flask-app/
â”œâ”€â”€ app.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ .dockerignore
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_app.py
â”œâ”€â”€ ci_simulate.sh
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ docker.yml (for real GitHub deployment)
```

---

## ğŸ“ Step-by-Step Guide

### 1ï¸âƒ£ app.py â€“ Flask Application

```python
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello():
    return "CI/CD Simulation â€“ Bujji's Flask App"

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
```

---

### 2ï¸âƒ£ requirements.txt â€“ Production Dependencies

```
Flask==2.3.2
```

---

### 3ï¸âƒ£ .dockerignore â€“ Files to Ignore During Build

```
__pycache__/
*.pyc
.env
*.log
tests/
```

---

### 4ï¸âƒ£ Dockerfile â€“ Containerizing Flask App

```Dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 5000
CMD ["python", "app.py"]
```

---

### 5ï¸âƒ£ tests/test_app.py â€“ Basic Unit Test

```python
def test_logic():
    assert 1 + 1 == 2
```

---

### 6ï¸âƒ£ ci_simulate.sh â€“ Manual CI Pipeline Simulation

```bash
#!/bin/bash

echo "ğŸ“¦ Installing dependencies..."
pip install -r requirements.txt

echo "ğŸ§ª Running tests..."
pytest

echo "ğŸ³ Building Docker image..."
docker build -t flask-ci .

echo "ğŸš€ Deploying container..."
docker run -d --name flask-ci-container -p 5000:5000 flask-ci

echo "ğŸ“‹ Logs:"
docker logs flask-ci-container
```

Run in sandbox:
```bash
bash ci_simulate.sh
```

---

## ğŸ” If pytest fails in sandbox:

Use system package manager:
```bash
apt-get update
apt-get install python3-pytest
```

Then:
```bash
pytest tests/
```

---

### 7ï¸âƒ£ .github/workflows/docker.yml (Real GitHub Actions CI/CD)

```yaml
name: Docker Build & Push

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: ğŸ Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: ğŸ“¦ Install Dependencies
        run: pip install -r requirements.txt

      - name: ğŸ§ª Run Tests
        run: pytest

      - name: ğŸ³ Build Docker Image
        run: docker build -t flask-ci .

      - name: ğŸ” Login & Push to Docker Hub
        run: |
          echo "${{ secrets.DOCKER_PASSWORD }}" | docker login -u "${{ secrets.DOCKER_USERNAME }}" --password-stdin
          docker tag flask-ci yourdockerhub/flask-ci:latest
          docker push yourdockerhub/flask-ci:latest
```

---

## ğŸš€ Final Commands Recap

| Action                     | Command                                        |
|---------------------------|------------------------------------------------|
| Install deps              | `pip install -r requirements.txt`             |
| Run tests                 | `pytest tests/`                                |
| Build image               | `docker build -t flask-ci .`                  |
| Run container             | `docker run -d --name flask-ci -p 5000:5000 flask-ci` |
| View logs                 | `docker logs flask-ci`                         |
| Stop container            | `docker stop flask-ci && docker rm flask-ci`  |

---

## ğŸ’¡ DevOps Principles Applied

| Principle          | Implementation                                       |
|--------------------|------------------------------------------------------|
| ğŸ“ Immutable Infra  | Docker image is identical across environments        |
| âš™ï¸ Automation        | CI/CD simulation script mimics GitHub workflow       |
| âœ… Test First       | Unit tests ensure app logic is safe to deploy        |
| ğŸ” Build Minimization | Dockerfile uses slim base + .dockerignore         |
| ğŸ”„ Repeatability    | `ci_simulate.sh` reproducibly runs the full pipeline |

---

## âœ… Conclusion

This setup:
- Containerizes your Flask app using Docker
- Simulates a CI/CD pipeline in sandbox
- Runs tests before deployment
- Prepares you for GitHub Actions, Docker Hub, Kubernetes

Built & Simulated by Bujji â€“ Tactical DevOps Operator ğŸ’¥  
Ready for Step 8: Pushing your image to Docker Hub?

```bash
docker login
docker tag flask-ci yourdockerhub/flask-ci:latest
docker push yourdockerhub/flask-ci:latest

